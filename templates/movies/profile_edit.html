{% extends 'base.html' %}

{% block content %}
	<div class="row justify-content-center">
		<div class="col-md-8">
			<h1>Edit Profile</h1>

			{% if form.non_field_errors %}
				<div class="alert alert-danger">
					{% for error in form.non_field_errors %}
						<p>{{ error }}</p>
					{% endfor %}
				</div>
			{% endif %}

			<form method="post" enctype="multipart/form-data">
				{% csrf_token %}

				<div class="row">
					<div class="col-md-4 mb-3 text-center">
						{% if profile.avatar %}
							<img src="{{ profile.avatar.url }}" alt="Current avatar" class="rounded-circle mb-3" style="width: 150px; height: 150px; object-fit: cover;">
							<p class="text-muted small">Current avatar</p>
						{% endif %}
						
						<div class="mb-3">
							<label for="{{ form.avatar.id_for_label }}" class="form-label">{{ form.avatar.label }}</label>
							{{ form.avatar }}
							{% if form.avatar.errors %}
								<div class="alert alert-danger small mt-1">
									{% for error in form.avatar.errors %}
										<p>{{ error }}</p>
									{% endfor %}
								</div>
							{% endif %}
						</div>
					</div>

					<div class="col-md-8">
						<div class="mb-3">
							<label for="{{ form.bio.id_for_label }}" class="form-label">{{ form.bio.label }}</label>
							{{ form.bio }}
							<small class="form-text text-muted">Max 500 characters</small>
							{% if form.bio.errors %}
								<div class="alert alert-danger small mt-1">
									{% for error in form.bio.errors %}
										<p>{{ error }}</p>
									{% endfor %}
								</div>
							{% endif %}
						</div>

						<div class="row">
							<div class="col-md-6 mb-3">
								<label for="{{ form.birth_date.id_for_label }}" class="form-label">{{ form.birth_date.label }}</label>
								{{ form.birth_date }}
								{% if form.birth_date.errors %}
									<div class="alert alert-danger small mt-1">
										{% for error in form.birth_date.errors %}
											<p>{{ error }}</p>
										{% endfor %}
									</div>
								{% endif %}
							</div>

							<div class="col-md-6 mb-3">
								<label for="{{ form.phone.id_for_label }}" class="form-label">{{ form.phone.label }}</label>
								{{ form.phone }}
								{% if form.phone.errors %}
									<div class="alert alert-danger small mt-1">
										{% for error in form.phone.errors %}
											<p>{{ error }}</p>
										{% endfor %}
									</div>
								{% endif %}
							</div>
						</div>
					</div>
				</div>

				<div class="d-flex gap-2 mt-4">
					<button type="submit" class="btn btn-primary">Save Changes</button>
					<a href="{% url 'movies:profile' %}" class="btn btn-outline-secondary">Cancel</a>
				</div>
			</form>
		</div>
	</div>
{% endblock %}
